# 函数试组件的运用

定义：数据组件只负责处理数据并将数据暴露个父级组件，不负责UI部分的渲染。  
优点：不负责渲染，只负责数据处理，提高了组件的高内聚、低耦合。在逻辑层将UI与数据分离，提高了组件的可维护性。
约定： 在文件名命名时采用 `xxx.m.vue` 的形式命名,在组件内部使用 `xxx_m` 命名。(m 代表模型)

实现思想： 利用props接收父组件传递的数据， 而插槽中的我们可以将子组件中的数据传递给父组件,这样就可以实现父组件和子组件的数据交互。

###1, 数据交互  
```vue
// test.m.vue
<script>
  // 函数试组件
  export default {
    name: 'test_m',
    props: {
      msg: {
        type: String,
        default: 'Hello Vue!'
      }
    },
    methods: {
      // 可以传入一个默认值
      sayHello: function (name = 'World') {
        console.log('/aaa');
        this.$emit('update:msg', `Hello ${name}!`)
        return `Hello ${name}!`
      }
    },
    render() {
      console.log(this.msg);
      return this.$slots.default({
        msg: this.msg,
        changeMsg: this.sayHello,
        inputEvent: {
          keydown: (e)=>{
            if(e.keyCode === 13){
              this.changeMsg(e.target.value)
            }
          }
        }
      });
    }
  }
</script>
```
```vue
// test.vue
<template>
  <div class="home">
    <img alt="Vue logo" src="../assets/logo.png">
    <G_HelloWorld msg="Welcome to Your Vue.js + TypeScript App"/>
    <test_m v-model:msg="msg">
      <template v-slot="{ msg, changeMsg, inputEvent }">
        <p>{{ msg }}</p>
        <input v-on="inputEvent"/>
        <button @clink="changeMsg" />
      </template>
    </test_m>
  </div>
</template>

<script lang="ts">
import test_m from './test.m.vue'

export default {
  components: {test_m},
  data() {
    return {
      msg: ''
    }
  }
}
</script>


```